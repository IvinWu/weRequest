/*!
 * weRequest 2.5.0
 * https://github.com/IvinWu/weRequest
 */
module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={sessionName:"session",codeName:"code",loginTrigger:function(){return!1},getSession:function(){return""},successTrigger:function(){return!0},setHeader:{},urlPerfix:"",successData:function(e){return e},doNotCheckSession:!1,errorTitle:"操作失败",errorContent:function(e){return e},reLoginLimit:3,errorCallback:null,reportCGI:!1,mockJson:!1,globalData:!1,sessionExpireKey:"sessionExpireKey",errorHandler:null,beforeSend:null,systemErrorHandler:null,domainChangeTrigger:function(e){var t,r;return(null===(t=null==e?void 0:e.errMsg)||void 0===t?void 0:t.indexOf("CONNECTION_REFUSED"))>=0||(null===(r=null==e?void 0:e.errMsg)||void 0===r?void 0:r.indexOf("ERR_CONNECTION_RESET"))>=0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={session:"",sessionExpire:1/0,isEnableBackupDomain:!1,isLoginning:!1}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function u(e){try{s(n.next(e))}catch(e){a(e)}}function i(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,i)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(u=0)),u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(6),i=r(0),s=r(1),f=r(11),l=r(7),c=r(3),d=r(12),p=r(4),y=r(8),g=r(14);function m(e){if(e.startsWith("http"))return e;var t=i.default.urlPerfix;return"function"==typeof i.default.urlPerfix&&(t=i.default.urlPerfix()),t+e}function v(e){return void 0===e.reLoginCount?e.reLoginCount=0:e.reLoginCount++,0===e.reLoginCount&&"function"==typeof e.beforeSend&&e.beforeSend(),e.showLoading&&u.default.show(e.showLoading),e.originUrl||(e.originUrl=e.url,e.url=m(e.url)),e}function h(){var e={};return"function"==typeof i.default.globalData?e=i.default.globalData():"object"==typeof i.default.globalData&&(e=i.default.globalData),e}function b(e,t){return 0===(e=function(e,t){var r,o,a,u;if(e.data||(e.data={}),e.header=e.header?e.header:{},"function"==typeof i.default.setHeader){var f=i.default.setHeader();"object"==typeof f&&(e.header=n(n({},e.header),f))}else"object"==typeof i.default.setHeader&&(e.header=n(n({},e.header),i.default.setHeader));t?e.data=n(n({},e.data),((r={})[i.default.codeName]=t,r)):s.default.session&&(e.data=n(n({},e.data),((o={})[i.default.sessionName]=s.default.session,o)));var l=h();return e.data=n(n({},l),e.data),e.method=e.method||"GET",e.dataType=e.dataType||"json",i.default.doNotUseQueryString||"GET"===e.method||(t?e.url=y.default.setParams(e.url,((a={})[i.default.codeName]=t,a)):s.default.session&&(e.url=y.default.setParams(e.url,((u={})[i.default.sessionName]=s.default.session,u))),e.url=y.default.setParams(e.url,l)),e.url=y.default.replaceDomain(e.url),p.default.start(e),e}(e,t)).reLoginCount&&"function"==typeof i.default.beforeSend&&(e=i.default.beforeSend(e,t,s.default.session)),new Promise(function(r,o){wx.request(n(n({},e),{success:function(e){return r(e)},fail:function(n){return i.default.domainChangeTrigger&&i.default.domainChangeTrigger(n)&&y.default.isInBackupDomainList(e.url)?(P(e.url),b(e,t).then(function(e){return r(e)})):o({type:"system-error",res:n})},complete:function(){"function"==typeof e.complete&&e.complete(),e.showLoading&&u.default.hide()}}))})}function x(e,t){return 0===(e=function(e,t){var r,o,a,u;if(e.formData||(e.formData={}),e.header=e.header?e.header:{},"function"==typeof i.default.setHeader){var f=i.default.setHeader();"object"==typeof f&&(e.header=n(n({},e.header),f))}else"object"==typeof i.default.setHeader&&(e.header=n(n({},e.header),i.default.setHeader));t?e.formData=n(n({},e.formData),((r={})[i.default.codeName]=t,r)):s.default.session&&(e.formData=n(n({},e.formData),((o={})[i.default.sessionName]=s.default.session,o)));var l=h();return e.formData=n(n({},l),e.formData),i.default.doNotUseQueryString||(t?e.url=y.default.setParams(e.url,((a={})[i.default.codeName]=t,a)):s.default.session&&(e.url=y.default.setParams(e.url,((u={})[i.default.sessionName]=s.default.session,u))),e.url=y.default.setParams(e.url,l)),e.url=y.default.replaceDomain(e.url),p.default.start(e),e}(e,t)).reLoginCount&&"function"==typeof i.default.beforeSend&&(e=i.default.beforeSend(e,t,s.default.session)),new Promise(function(r,n){wx.uploadFile({url:e.url,filePath:e.filePath||"",name:e.name||"",formData:e.formData,success:function(e){return r(e)},fail:function(o){return i.default.domainChangeTrigger&&i.default.domainChangeTrigger(o)&&y.default.isInBackupDomainList(e.url)?(P(e.url),x(e,t).then(function(e){return r(e)})):n({type:"system-error",res:o})},complete:function(){"function"==typeof e.complete&&e.complete(),e.showLoading&&u.default.hide()}})})}var w=Promise.resolve();function S(e){return new Promise(function(t,r){if(e=v(e),i.default.mockJson){var n=f.default.get(e);if(n){var o=d.default.responseForRequest(n,e);return t(o)}}e.cache&&l.default.get(e),c.default.main().then(function(t){return b(e,t)}).then(function(r){var n=d.default.responseForRequest(r,e);return t(n)}).catch(function(t){return(0,g.catchHandler)(t,e,r)})})}function E(e){return new Promise(function(t,r){if(e=v(e),i.default.mockJson){var n=f.default.get(e);if(n){var o=d.default.responseForUploadFile(n,e);return t(o)}}c.default.main().then(function(t){return x(e,t)}).then(function(r){var n=d.default.responseForUploadFile(r,e);return t(n)}).catch(function(t){return(0,g.catchHandler)(t,e,r)})})}function P(e){void 0===e&&(e=""),s.default.isEnableBackupDomain||(s.default.isEnableBackupDomain=!0,"function"==typeof i.default.backupDomainEnableCallback&&i.default.backupDomainEnableCallback(e))}t.default={format:m,request:function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return s.default.isLoginning?[4,w]:[3,2];case 1:return t.sent(),[3,3];case 2:return[2,w=S(e)];case 3:return[2,S(e)]}})})},uploadFile:function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return s.default.isLoginning?[4,w]:[3,2];case 1:return t.sent(),[3,3];case 2:return[2,w=E(e)];case 3:return[2,E(e)]}})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),a=r(4),u=null;function i(){return!n.default.session||!!(o.default.sessionExpireTime&&(new Date).getTime()>n.default.sessionExpire)&&(s(),!0)}function s(){n.default.session="",wx.removeStorage({key:o.default.sessionName}),o.default.sessionExpireTime&&o.default.sessionExpireKey&&(n.default.sessionExpire=1/0,wx.removeStorage({key:o.default.sessionExpireKey}))}t.default={main:function(){return(o.default.doNotCheckSession?Promise.resolve():(u||(u=new Promise(function(e){if(i())return e();console.log("wx.checkSession()");var t=(new Date).getTime();wx.checkSession({success:function(){return e()},fail:function(){return s(),e()},complete:function(){var e=(new Date).getTime();a.default.report("wx_checkSession",t,e)}})})),u)).then(function(){return i()?(o.default.doNotCheckSession=!0,new Promise(function(e,t){n.default.isLoginning=!0;var r=(new Date).getTime();wx.login({success:function(r){return r.code?e(r.code):t({type:"system-error",res:{errMsg:"请稍后重试[code 获取失败]"}})},complete:function(){var e=(new Date).getTime();a.default.report("wx_login",r,e)},fail:function(e){return t({type:"system-error",res:e})}})})):Promise.resolve()})},setSession:function(e){n.default.session=e,o.default.doNotCheckSession=!0,o.default.sessionExpireTime&&o.default.sessionExpireKey&&(n.default.sessionExpire=(new Date).getTime()+o.default.sessionExpireTime,wx.setStorage({key:o.default.sessionExpireKey,data:String(n.default.sessionExpire)})),wx.setStorage({key:o.default.sessionName,data:n.default.session})},delSession:s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(5);function a(e,t,r){"function"==typeof n.default.reportCGI&&n.default.reportCGI(e,t,r,o.default)}t.default={start:function(e){e._reportStartTime=(new Date).getTime()},end:function(e){e._reportEndTime=(new Date).getTime(),e.report&&e._reportStartTime&&a(e.report,e._reportStartTime,e._reportEndTime)},report:a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.default=function(e){return n.default.request(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={show:function(e){wx.showToast({title:"boolean"==typeof e?"加载中":e,icon:"loading",mask:!0,duration:6e4})},hide:function(){wx.hideToast({})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){e.originUrl&&wx.getStorage({key:e.originUrl,success:function(t){(!0===e.cache||"function"==typeof e.cache&&e.cache(t.data))&&"function"==typeof e.success&&e.success(t.data,{isCache:!0}),"function"==typeof e.complete&&e.complete()}})},set:function(e,t){e.originUrl&&(!0===e.cache||"function"==typeof e.cache&&e.cache(t))&&wx.setStorage({key:e.originUrl,data:t})}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=r(1);function u(e,t){void 0===e&&(e="");var r={};if(t>=0){var n=e.substr(t+1).split("&");n.forEach(function(e,t){var o=n[t].split("=");r[o[0]]=o[1]})}return r}function i(e,t,r){var n="";return Object.keys(e).length&&(n=Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURI(e[t]))}).join("&")),t>=0?r.substring(0,t+(n?1:0))+n:r+(n?"?":"")+n}t.default={setParams:function(e,t){void 0===e&&(e="");var r=e.indexOf("?"),o=u(e,r);return i(o=n(n({},o),t),r,e)},delParams:function(e,t){void 0===e&&(e="");var r=e.indexOf("?"),n=u(e,r);return delete n[t],i(n,r,e)},replaceDomain:function(e){if(void 0===e&&(e=""),a.default.isEnableBackupDomain&&o.default.backupDomainList&&"object"==typeof o.default.backupDomainList)for(var t in o.default.backupDomainList)if(e.indexOf(t)>=0){e=e.replace(t,o.default.backupDomainList[t]);break}return e},isInBackupDomainList:function(e){void 0===e&&(e="");var t=!1;if(o.default.backupDomainList&&"object"==typeof o.default.backupDomainList)for(var r in o.default.backupDomainList)if(e.indexOf(r)>=0){t=!0;break}return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(5),a=r(16),u=r(17),i=r(18),s=r(19),f=r(20),l={init:n.default,request:o.default,uploadFile:a.default,setSession:u.default,getSession:i.default,getConfig:s.default,version:f.version};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1);t.default=function(e){Object.assign(n.default,e);try{o.default.session=wx.getStorageSync(n.default.sessionName)||""}catch(e){console.error("wx.getStorageSync:fail, can not get session.")}try{o.default.sessionExpire=wx.getStorageSync(n.default.sessionExpireKey||"sessionExpireKey")||1/0}catch(e){console.error("wx.getStorageSync:fail, can not get sessionExpire.")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(6);t.default={get:function(e){if(!(n.default.mockJson[e.url]||e.originUrl&&n.default.mockJson[e.originUrl]))return console.error("mock 没有对应接口的数据"),!1;var t=n.default.mockJson[e.url]||(e.originUrl?n.default.mockJson[e.originUrl]:""),r={data:t=JSON.parse(JSON.stringify(t)),statusCode:200};return o.default.hide(),r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),a=r(2),u=r(7),i=r(4),s=r(3),f=r(8),l=r(13);function c(e,t){try{var r=o.default.getSession(e,t);r&&r!==n.default.session&&(s.default.setSession(r),n.default.isLoginning=!1)}catch(e){console.error("Function getSession occur error: "+e)}}t.default={responseForRequest:function(e,t){if(200!==e.statusCode)throw{type:"http-error",res:e};if(i.default.end(t),"json"===t.dataType&&"string"==typeof e.data){"function"==typeof o.default.getUnexpectedString&&o.default.getUnexpectedString(e.data),e.data=(0,l.default)(e.data);try{e.data=JSON.parse(e.data)}catch(e){}}if(o.default.loginTrigger(e.data)&&void 0!==t.reLoginCount&&t.reLoginCount<o.default.reLoginLimit)return s.default.delSession(),t.data&&delete t.data[o.default.sessionName],t.url=f.default.delParams(t.url,o.default.sessionName),a.default.request(t);if(!o.default.successTrigger(e.data))throw{type:"logic-error",res:e};var r="";c(e.data,e);try{r=o.default.successData(e.data)}catch(e){console.error("Function successData occur error: "+e)}if(u.default.set(t,r),!t.noCacheFlash){if("function"!=typeof t.success)return r;t.success(r)}},responseForUploadFile:function(e,t){if(200!==e.statusCode)throw{type:"http-error",res:e};if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){throw{type:"logic-error",res:e}}if(i.default.end(t),o.default.loginTrigger(e.data)&&void 0!==t.reLoginCount&&t.reLoginCount<o.default.reLoginLimit)return s.default.delSession(),t.formData&&delete t.formData[o.default.sessionName],t.url=f.default.delParams(t.url,o.default.sessionName),a.default.uploadFile(t);if(!o.default.successTrigger(e.data))throw{type:"logic-error",res:e};var r="";c(e.data);try{r=o.default.successData(e.data)}catch(e){console.error("Function successData occur error: "+e)}if("function"!=typeof t.success)return r;t.success(r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/\u000A/g,o=/\u000D/g,a=/\u2028/g,u=/\u2029/g;t.default=function(e){return e=(e=(e=(e=e.replace(n,"")).replace(o,"")).replace(a,"")).replace(u,"")}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.catchHandler=void 0;var a=r(15),u=r(0),i=function(e){function t(t,r){void 0===r&&(r={});var n=e.call(this,t)||this;return n.data=r,n}return o(t,e),t}(Error);t.catchHandler=function(e,t,r){var n=e.type,o=e.res;if("function"==typeof u.default.errorCallback&&u.default.errorCallback(t,o),t.catchError){if("http-error"===n)return r(new Error(o.statusCode.toString()));if("logic-error"===n){var s=a.default.getErrorMsg(o);return r(new i(s.content,o.data))}return r("system-error"===n?new Error(o.errMsg):e)}return"http-error"===n||"logic-error"===n?a.default.logicError(t,o):"system-error"===n?a.default.systemError(t,o):r(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function o(e){var t="";if("function"==typeof n.default.errorTitle)try{t=n.default.errorTitle(e.data)}catch(e){}else"string"==typeof n.default.errorTitle&&(t=n.default.errorTitle);var r="";if("function"==typeof n.default.errorContent)try{r=n.default.errorContent(e.data)}catch(e){}else"string"==typeof n.default.errorContent&&(r=n.default.errorContent);return{title:t,content:r}}function a(e,t){wx.showModal({title:e||"",content:t||"网络或服务异常，请稍后重试",showCancel:!1})}t.default={systemError:function(e,t){"function"==typeof e.fail?e.fail(t):"function"==typeof n.default.systemErrorHandler?n.default.systemErrorHandler(t):a("","")},logicError:function(e,t){if("function"==typeof e.fail)e.fail(t);else if("function"==typeof n.default.errorHandler)n.default.errorHandler(t.data);else{var r=o(t);a(r.title,r.content)}},doError:a,getErrorMsg:o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.default=function(e){return n.default.uploadFile(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);t.default=function(e){n.default.setSession(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.default=function(){return n.default.session}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1);t.default=function(){return{urlPerfix:n.default.urlPerfix,sessionExpireTime:n.default.sessionExpireTime,sessionExpireKey:n.default.sessionExpireKey,sessionExpire:o.default.sessionExpire}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0;t.version="2.5.0"}]).default;